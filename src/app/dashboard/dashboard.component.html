<main>
  <div class="d-flex flex-column align-items-center">
    <h1 id="dash-title">Dashboard FORD</h1>
  </div>

  <section
    class="d-flex justify-content-around mt-3 flex-wrap"
    style="width: 100%"
  >
    <div class="card border-2 border-secondary">
      <h5 class="card-header border-secondary text-secondary">Veículo</h5>
      <div class="card-body">
        <select
          class="form-select"
          [(ngModel)]="selected"
          (ngModelChange)="this.googleChartsInit()"
        >
          <option *ngFor="let veiculo of veiculos; index as i" [value]="i">
            {{ veiculo.model }}
          </option>
        </select>
      </div>
    </div>

    <div class="card border-2 border-secondary">
      <h5 class="card-header border-secondary text-secondary">
        Total de vendas
      </h5>

      <div class="card-body">
        <h5 class="card-title text-primary">
          {{ veiculos[selected].totalSales }}
        </h5>
        <p class="text-secondary">unid.</p>
      </div>
    </div>

    <div class="card border-2 border-secondary">
      <h5 class="card-header border-secondary text-secondary">Conectados</h5>
      <div class="card-body">
        <h5 class="card-title text-primary">
          {{ veiculos[selected].connected }}
        </h5>
        <p class="text-secondary">unid.</p>
      </div>
    </div>

    <div class="card border-2 border-secondary">
      <h5 class="card-header border-secondary text-secondary">
        Update Software
      </h5>
      <div class="card-body">
        <h5 class="card-title text-primary">
          {{ veiculos[selected].softwareUpdates }}
        </h5>
        <p class="text-secondary">unid.</p>
      </div>
    </div>
  </section>

  <div
    style="width: 100%"
    class="my-4 d-flex justify-content-md-between justify-content-sm-center flex-wrap"
  >
    <img
      src="{{
        'http://localhost:3000/' + veiculos[selected].path.replace('\\', '/')
      }}"
      alt="vehicle image"
    />

    <div  id="doughnut-chart-connected"></div>
    <div style="margin: 15px;" id="doughnut-chart-updated"></div>
  </div>

  <table class="w-100 table table-bordered m-0">
    <thead>
      <tr>
        <th>Código - Vin</th>
        <th>Odômetro</th>
        <th>Nível de Combustível %</th>
        <th>Status</th>
        <th>Lat.</th>
        <th>Long.</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          <input
            (keypress)="searchVehicleData()"
            placeholder="Pesquise veículo"
            type="text"
            class="form-control"
            [(ngModel)]="vin"
          />
        </td>
        <td>{{ data.odometer }}</td>
        <td>{{ data.fuelLevel }}</td>
        <td>{{ data.status }}</td>
        <td>{{ data.lat }}</td>
        <td>{{ data.long }}</td>
      </tr>
    </tbody>
  </table>
</main>
<footer></footer>
